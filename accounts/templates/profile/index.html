{% extends "global/base.html" %} {% load static %} {% block content %}

<nav class="w-full border-b bg-white">
  <div class="max-w-7xl mx-auto p-4 flex items-center justify-between">
    <div
      class="flex items-center gap-3 cursor-pointer transition-opacity hover:opacity-80"
      onclick="location.href='{% url 'dashboard:index' %}'"
    >
      <img src="{% static 'images/logo.svg' %}" alt="Logo" class="w-8 h-8" />
      <span class="font-semibold text-lg max-md:hidden">AniverLembre</span>
    </div>
    <div class="flex items-center gap-2">
      <div class="relative">
        <button
          id="profileDropdownBtn"
          class="flex items-center gap-2 px-3 py-2 rounded-full bg-white hover:bg-gray-100 outline-none transition-colors"
        >
          <div
            class="w-8 h-8 rounded-full bg-indigo-600 text-white font-semibold flex items-center justify-center flex-shrink-0"
          >
            {{ user.username|slice:":1"|upper }}
          </div>
          <span class="text-sm font-medium text-gray-700"
            >{{ user.username }}</span
          >
          <span
            class="material-symbols-outlined text-gray-500 text-base flex-shrink-0"
          >
            expand_more
          </span>
        </button>

        <div
          id="profileDropdown"
          class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 border z-50"
        >
          <a
            href="{% url 'accounts:profile' %}"
            class="block px-4 py-2 text-sm text-gray-700 font-medium hover:bg-gray-100"
          >
            <span
              class="material-symbols-outlined text-gray-600 text-sm align-middle mr-2"
              >person</span
            >
            Perfil
          </a>
          <a
            href="{% url 'accounts:logout' %}"
            class="block px-4 py-2 text-sm text-red-700 font-medium hover:bg-gray-100"
          >
            <span
              class="material-symbols-outlined text-red-600 text-sm align-middle mr-2 text-medium"
              >logout</span
            >
            Sair
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>
<main class="max-w-7xl mx-auto px-4 py-6">
  <a
    href="{% url 'dashboard:index' %}"
    class="flex items-center gap-2 px-4 py-3 rounded-lg text-indigo-600 transition-colors border border-indigo-600 font-semibold transition hover:bg-indigo-600 hover:text-white block w-max mb-4"
  >
    <span class="material-symbols-outlined text-lg">arrow_back</span>
    Voltar
  </a>
  <h1 class="text-2xl font-bold mb-6">Meu Perfil</h1>

  <div class="bg-white rounded border shadow-sm p-6">
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Nome de usuário</label
        >
        <div class="text-lg">{{ user.username }}</div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Email</label
        >
        <div class="text-lg">{{ user.email|default:"Não informado" }}</div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Nome completo</label
        >
        <div class="text-lg">
          {% if user.first_name %} {{ user.first_name }}{% else %} Não informado
          {% endif %}
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Conta criada em</label
        >
        <div class="text-lg">{{ user.date_joined|date:"d/m/Y" }}</div>
      </div>
    </div>

    <div class="mt-6 pt-6 border-t">
      <p class="text-sm text-gray-500">
        Em breve você poderá editar suas informações de perfil.
      </p>
    </div>
  </div>
</main>

<script>
  // Dropdown de Perfil
  const profileDropdownBtn = document.getElementById("profileDropdownBtn");
  const profileDropdown = document.getElementById("profileDropdown");

  if (profileDropdownBtn && profileDropdown) {
    profileDropdownBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      profileDropdown.classList.toggle("hidden");
    });

    // Fechar dropdown ao clicar fora
    document.addEventListener("click", (e) => {
      if (
        !profileDropdownBtn.contains(e.target) &&
        !profileDropdown.contains(e.target)
      ) {
        profileDropdown.classList.add("hidden");
      }
    });
  }
</script>

{% endblock %}
